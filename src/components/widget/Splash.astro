---
import { siteConfig } from "@/config";
---

<div id="splash-wrapper" class="fixed inset-0 z-[9999] bg-[var(--page-bg)] flex items-center justify-center pointer-events-auto transition-opacity duration-700 opacity-100">
    <div class="relative z-10 text-center px-4">
        <div id="splash-text" class="text-2xl md:text-4xl font-bold text-[var(--primary)] font-sans tracking-widest min-h-[1.5em] text-shadow-sm"></div>
    </div>
</div>

<style>
    .text-shadow-sm {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
</style>

<script define:vars={{ subtitle: siteConfig.subtitle }}>
    const splashWrapper = document.getElementById('splash-wrapper');
    const splashText = document.getElementById('splash-text');

    function initSplash() {
        // Typewriter Effect
        const text = subtitle || "Welcome to my Blog";
        let index = 0;
        
        function typeWriter() {
            if (index < text.length) {
                splashText.innerHTML += text.charAt(index);
                index++;
                setTimeout(typeWriter, 100);
            } else {
                // Done typing, wait then fade out
                setTimeout(() => {
                    splashWrapper.style.opacity = '0';
                    splashWrapper.style.pointerEvents = 'none';
                    
                    // Hide completely after fade
                    setTimeout(() => {
                        splashWrapper.style.display = 'none';
                    }, 700);
                }, 1000);
            }
        }

        // Delay start slightly
        setTimeout(typeWriter, 500);
    }

    // Run immediately
    initSplash();
</script>
